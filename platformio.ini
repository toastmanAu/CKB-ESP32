; platformio.ini — CKB-ESP32 library build/test environments
; Copy to your project root and add library_deps as needed.
; Run: pio run -e minimal     (or whichever env)
;
; ── Shared base ──────────────────────────────────────────────────────────────
[env]
framework = arduino
lib_deps =
    bblanchon/ArduinoJson@^7.0.0
monitor_speed = 115200

; ── Full node — full feature set (ESP32-S3 / P4 with ample flash) ─────────
[env:full]
platform = espressif32
board = esp32-s3-devkitc-1
build_flags =
    -D CKB_NODE_FULL
    -D CKB_PROFILE_FULL
    -D CKB_WITH_SIGNER
; Expected flash: largest. All capabilities on. JSON=16KB.

; ── Light + minimal — balance check only (ESP32-C3, 4MB flash) ───────────
[env:minimal]
platform = espressif32
board = esp32-c3-devkitm-1
build_flags =
    -D CKB_PROFILE_MINIMAL
; Forces CKB_NODE_LIGHT, strips block/peer/pool/send.
; JSON=2KB, cells=8, txs=4. Smallest flash footprint.

; ── Light + display — balance + tx history (ESP32-S3 TFT / CYD) ─────────
[env:display]
platform = espressif32
board = esp32-s3-devkitc-1
build_flags =
    -D CKB_NODE_LIGHT
    -D CKB_PROFILE_DISPLAY
; JSON=4KB, cells=32, txs=16. No send, no signing.

; ── Light + signer — hardware wallet / POS terminal (ESP32-P4) ───────────
[env:signer]
platform = espressif32
board = esp32s3box
build_flags =
    -D CKB_NODE_LIGHT
    -D CKB_PROFILE_SIGNER
    -D CKB_WITH_SIGNER
; JSON=4KB, cells=16. Signing + send. No block/peer/pool queries.

; ── Full node + monitor — block explorer / node dashboard ─────────────────
[env:monitor]
platform = espressif32
board = esp32dev
build_flags =
    -D CKB_NODE_FULL
    -D CKB_PROFILE_MONITOR
; Block/peer/pool queries. No indexer, no send, no signing.

; ── Full node default — CKB_NODE_FULL, no profile (all defaults) ──────────
[env:node-full]
platform = espressif32
board = esp32dev
build_flags =
    -D CKB_NODE_FULL

; ── Light client default — CKB_NODE_LIGHT, no profile ────────────────────
[env:node-light]
platform = espressif32
board = esp32-c3-devkitm-1
build_flags =
    -D CKB_NODE_LIGHT

; ── Fine-grain example: full node, strip pool queries, add signer ─────────
[env:custom-example]
platform = espressif32
board = esp32-s3-devkitc-1
build_flags =
    -D CKB_NODE_FULL
    -D CKB_NO_POOL_QUERIES
    -D CKB_NO_PEER_QUERIES
    -D CKB_WITH_SIGNER
    -D CKB_MAX_CELLS=32
    -D CKB_JSON_DOC_SIZE=6144

; ── ESP32-P4 (for NerdMiner CKB / hardware wallet work) ──────────────────
[env:esp32p4]
platform = espressif32
board = esp32-p4-function-ev-board
build_flags =
    -D CKB_NODE_LIGHT
    -D CKB_PROFILE_SIGNER
    -D CKB_WITH_SIGNER
